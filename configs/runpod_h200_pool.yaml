# RunPod H200 Configuration WITH Opponent Pool
# Enables diverse opponent training

network_config:
  hidden_dim: 256
  num_heads: 8
  num_layers: 4
  dropout: 0.1
  species_embedding_dim: 64

ppo_config:
  learning_rate: 0.0001
  clip_epsilon: 0.2
  value_coef: 0.5
  entropy_coef: 0.04
  gamma: 0.99
  gae_lambda: 0.95
  ppo_epochs: 4
  minibatch_size: 2048
  max_grad_norm: 0.5
  normalize_advantages: true
  clip_value: true
  target_kl: 0.02

total_iterations: 500
games_per_iteration: 4096
checkpoint_frequency: 25
eval_frequency: 10

# Evaluation opponents - all variants for detailed tracking
eval_opponents:
  - random
  - heuristic
  - aggressive
  - defensive
  - queue
  - skunk
  - noisy
  - online

# Disable async (opponent pool needs Python path)
async_game_generation: false

self_play_temperature: 1.0
shaped_rewards: false

# ENABLE opponent pool
use_opponent_pool: true

opponent_config:
  current_weight: 0.6
  checkpoint_weight: 0.2
  random_weight: 0.1
  heuristic_weight: 0.1
  mcts_weight: 0.0
  max_checkpoints: 10

lr_warmup_iterations: 20
lr_decay: "cosine"

buffer_size: 400000
min_buffer_size: 20000
gradient_accumulation_steps: 1

seed: 42
device: "cuda"
experiment_name: "h200_pool"
checkpoint_dir: "checkpoints"
log_frequency: 1

save_best_model: true
best_model_metric: "heuristic"
